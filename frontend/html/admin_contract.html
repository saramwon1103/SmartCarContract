<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Car Rent Management | Morent</title>
  <link rel="stylesheet" href="../css/admin_dashboard.css" />
  <link rel="stylesheet" href="../css/car_rent.css" />
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
</head>

<body>
  <div class="dashboard-container">
    <!-- Sidebar will be loaded by admin_sidebar.js -->

    <!-- Main Section -->
    <main class="main">
      <header class="topbar">
        <div class="search">
          <input type="text" placeholder="Search car, customer, contract..." id="searchInput" />
          <span class="filter"><img src="../image/search.svg" alt="Search icon" class="icon"></span>
        </div>
        <div class="user-icons">
          <span><img src="../image/heart.svg" alt="Heart icon" class="icon"></span>
          <span><img src="../image/notification.svg" alt="Bell icon" class="icon"></span>
          <span><img src="../image/setting.svg" alt="Settings icon" class="icon"></span>
          <img src="https://i.pravatar.cc/40" alt="avatar" class="avatar" />
        </div>
      </header>

      <section class="content">
        <!-- LEFT PANEL - List of Rented Cars -->
        <div class="left-panel left-panel-full">
          <div class="card">
            <div class="header filter-header">
              <h3>Car Rent Management</h3>
              <div class="filter-controls">
                <select id="statusFilter" class="status-filter">
                  <option value="">All Status</option>
                  <option value="Pending">Pending</option>
                  <option value="Active">Active</option>
                  <option value="Completed">Completed</option>
                  <option value="Terminated">Terminated</option>
                </select>
                <button class="btn-primary" onclick="refreshData()">Refresh</button>
              </div>
            </div>

            <!-- Stats Cards -->
            <div class="stats-grid">
              <div class="stat-card">
                <p>Total Contracts</p>
                <h4 id="totalContracts">0</h4>
              </div>
              <div class="stat-card">
                <p>Active</p>
                <h4 id="activeContracts">0</h4>
              </div>
              <div class="stat-card">
                <p>Pending</p>
                <h4 id="pendingContracts">0</h4>
              </div>
              <div class="stat-card">
                <p>Completed</p>
                <h4 id="completedContracts">0</h4>
              </div>
            </div>

            <!-- Table of Rented Cars -->
            <div class="table-container">
              <table class="contract-table">
                <thead>
                  <tr>
                    <th>Contract ID</th>
                    <th>Car</th>
                    <th>Customer</th>
                    <th>Owner</th>
                    <th>Type</th>
                    <th>Status</th>
                    <th>Deposit</th>
                    <th>Total Price</th>
                    <th>Actions</th>
                  </tr>
                </thead>
                <tbody id="rentedCarsTable">
                  <!-- Data will be loaded here -->
                  <tr>
                    <td colspan="9" class="table-empty">Loading data...</td>
                  </tr>
                </tbody>
              </table>
            </div>
          </div>
        </div>

        <!-- RIGHT PANEL - Selected Contract Details -->
        <div class="right-panel">
          <div class="card rental-details" id="contractDetails">
            <h3>Contract Details</h3>
            <div class="car-box">
              <img id="detailCarImage" src="" alt="Car image">
              <div>
                <h4 id="detailCarName">-</h4>
                <p id="detailCarType">-</p>
              </div>
              <span id="detailContractId">-</span>
            </div>
            <div class="contract-detail-section">
              <p class="contract-detail-label">Contract Type</p>
              <p class="contract-detail-value" id="detailContractType">-</p>
            </div>
            <div class="contract-detail-section">
              <p class="contract-detail-label">Status</p>
              <span class="status-badge" id="detailStatus">-</span>
            </div>
            <div class="contract-detail-section">
              <p class="contract-detail-label">Transaction Hash</p>
              <div class="hash-container">
                <span class="hash-text" id="detailTXHash">-</span>
                <button class="copy-btn" onclick="copyToClipboard('detailTXHash')" title="Copy Hash">ğŸ“‹</button>
              </div>
            </div>
            <!-- Date Information -->
            <div class="date-info-grid">
              <div class="date-item">
                <div class="date-icon">ğŸ“…</div>
                <div class="date-content">
                  <p class="date-label">Start Date</p>
                  <p class="date-value" id="detailStartDate">-</p>
                </div>
              </div>
              <div class="date-item">
                <div class="date-icon">ï¿½</div>
                <div class="date-content">
                  <p class="date-label">End Date</p>
                  <p class="date-value" id="detailEndDate">-</p>
                </div>
              </div>
            </div>
            <!-- Participants Information -->
            <div class="participants-section">
              <div class="participant-card">
                <div class="participant-header">
                  <span class="participant-icon">ğŸ‘¤</span>
                  <h5>Customer</h5>
                </div>
                <div class="participant-info">
                  <p class="participant-name" id="detailCustomerName">-</p>
                  <p class="participant-email" id="detailCustomerEmail">-</p>
                </div>
              </div>
              <div class="participant-card">
                <div class="participant-header">
                  <span class="participant-icon">ğŸª</span>
                  <h5>Owner</h5>
                </div>
                <div class="participant-info">
                  <p class="participant-name" id="detailOwnerName">-</p>
                  <p class="participant-email" id="detailOwnerEmail">-</p>
                </div>
              </div>
            </div>
            <!-- Price Information -->
            <div class="price-info-grid">
              <div class="price-card deposit-card">
                <div class="price-icon">ğŸ’°</div>
                <div class="price-content">
                  <p class="price-label">Deposit</p>
                  <h4 class="price-value" id="detailDeposit">-</h4>
                </div>
              </div>
              <div class="price-card total-card">
                <div class="price-icon">ğŸ’³</div>
                <div class="price-content">
                  <p class="price-label">Total Price</p>
                  <h4 class="price-value" id="detailTotalPrice">-</h4>
                </div>
              </div>
            </div>
            <div class="contract-actions">
              <button class="btn-primary" onclick="viewOnBlockchain()">
                ğŸ”— View on Blockchain
              </button>
              <button class="btn-warning" onclick="updateContractStatus(selectedContract?.ContractId)">
                âœï¸ Update Status
              </button>
              <button class="btn-danger" onclick="terminateContract()">
                â›” Terminate Contract
              </button>
            </div>
          </div>

          <!-- Empty State -->
          <div class="card" id="emptyState">
            <div class="empty-state-content">
              <div class="empty-icon">ğŸ“„</div>
              <h3>No Contract Selected</h3>
              <p>Select a contract from the list to view its details and manage it.</p>
            </div>
          </div>
        </div>
      </section>
    </main>
  </div>

  <!-- Include Admin Contract Script -->
  <script src="../js/admin_contract.js"></script>
  <script src="../js/admin_sidebar.js"></script>
</body>
</html>

